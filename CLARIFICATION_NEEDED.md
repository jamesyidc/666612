# 子账户纠错机制需求澄清

## 用户需求原文
```
维护次数0 他的持仓等于10u  如果大于10u就把多余的平掉 小于10u的补足10u【允许范围9.5-10.5】
维护次数1 他的持仓等于10u  如果大于10u就把多余的平掉 小于10u的补足10u  【允许范围9.5-10.5】
维护次数2他的持仓等于20u   如果大于20u就把多余的平掉 小于20u的补足20u  【允许范围21-19】
```

## 两种理解

### 理解1：保证金模式（当前实现）
- 目标：调整保证金到10U或20U
- 方式：转入/转出保证金
- 问题：逐仓模式下，保证金调整受OKEx API限制

### 理解2：持仓量模式（可能的正确理解）
- 目标：调整持仓名义价值到10U或20U
- 方式：平掉多余的持仓，或补足不足的持仓
- 例如：
  - BCH持仓：2张，价格476.7，名义价值=953.4U（太大！）
  - 应该平掉：从2张降到0.021张（10U/476.7）

## 当前BCH情况

```
BCH-USDT-SWAP long:
- 维护次数: 1
- 持仓量: 2张
- 价格: 476.7 USDT
- 持仓名义价值: 953.4U （2 * 476.7）
- 保证金: 22.25U
- 杠杆: 10x
```

### 如果是保证金模式
- 目标保证金: 10U
- 需要转出: 12.25U
- 但OKEx限制无法转出（会触发爆仓风险）

### 如果是持仓量模式
- 目标持仓名义价值: 10U
- 目标持仓量: 10U / 476.7 = 0.021张
- 需要平仓: 2 - 0.021 = 1.979张
- 这样做合理吗？

## 问题

1. **用户说的"持仓"到底是指什么？**
   - 保证金？
   - 持仓名义价值？
   - 持仓数量？

2. **超级维护的逻辑是什么？**
   - 维护时开100U仓位，留10U保证金
   - 这意味着持仓名义价值是100U，保证金是10U（10倍杠杆）
   - 所以10U应该是指**保证金**，不是持仓名义价值

3. **为什么BCH的保证金是22.25U？**
   - 开仓时：保证金11.95U
   - 维护后：开100U仓位，留10U保证金
   - 但实际变成了22.25U？

## 需要澄清

请用户明确：
1. "持仓10U"是指保证金10U，还是持仓名义价值10U？
2. 维护后为什么BCH的保证金是22.25U而不是10U？
3. 纠错机制应该如何处理这种情况？
