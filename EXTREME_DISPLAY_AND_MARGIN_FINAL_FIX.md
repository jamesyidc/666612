# æå€¼æ˜¾ç¤ºå’Œä¿è¯é‡‘æ˜¾ç¤ºæœ€ç»ˆä¿®å¤æŠ¥å‘Š

## é—®é¢˜1ï¼šæå€¼æ˜¾ç¤ºä¸º "--" âœ… å·²ä¿®å¤

### åŸå› å®šä½
- **åç«¯API**ï¼šâœ… æ­£å¸¸è¿”å›æå€¼æ•°æ®ï¼ˆmax_profit_rate, max_loss_rateï¼‰
- **å‰ç«¯HTML**ï¼šâŒ è¡¨æ ¼ä¸­ç¼ºå°‘æå€¼åˆ—çš„æ¸²æŸ“ä»£ç 

### ä¿®å¤å†…å®¹

#### 1. æ·»åŠ è¡¨å¤´åˆ—ï¼ˆç¬¬579-593è¡Œï¼‰
```html
<thead>
    <tr>
        <th>ç¼–å·</th>
        <th>å¸ç§</th>
        <th>æ–¹å‘</th>
        <th>æŒä»“é‡</th>
        <th>å¼€ä»“å‡ä»·</th>
        <th>æ ‡è®°ä»·æ ¼</th>
        <th>æ æ†</th>
        <th>æœªå®ç°ç›ˆäº</th>
        <th>ä¿è¯é‡‘</th>
        <th>æ”¶ç›Šç‡</th>
        <th>æå€¼</th>  <!-- âœ… æ–°å¢ -->
        <th>çŠ¶æ€</th>
    </tr>
</thead>
```

#### 2. æ·»åŠ æ•°æ®åˆ—æ¸²æŸ“ï¼ˆç¬¬1056-1091è¡Œï¼‰
```javascript
tbody.innerHTML = data.map(item => {
    const coinNumber = coinNumbers[item.inst_id] || '--';
    // æ ¼å¼åŒ–æå€¼æ˜¾ç¤º
    let extremeHtml = '--';
    if (item.max_profit_rate !== null && item.max_profit_rate !== undefined) {
        const maxProfit = item.max_profit_rate.toFixed(2);
        const maxLoss = (item.max_loss_rate || 0).toFixed(2);
        extremeHtml = `<div style="font-size: 12px;">
            <div style="color: #48bb78;">ğŸ† ${maxProfit}%</div>
            <div style="color: #f56565;">ğŸ“‰ ${maxLoss}%</div>
        </div>`;
    }
    
    return `
    <tr>
        ...
        <td>${extremeHtml}</td>  <!-- âœ… æ–°å¢æå€¼åˆ— -->
        <td>...</td>
    </tr>
    `;
}).join('');
```

#### 3. ä¿®å¤ç©ºæ•°æ®colspan
```javascript
tbody.innerHTML = '<tr><td colspan="12" class="empty">å½“å‰æ— æŒä»“</td></tr>';
// ä» colspan="11" æ”¹ä¸º colspan="12"
```

### éªŒè¯ç»“æœ

âœ… **APIæ•°æ®æ­£ç¡®è¿”å›æå€¼ï¼š**

```
FIL-USDT-SWAP short:
  å½“å‰ç›ˆäºç‡: 3.29%
  ğŸ† æœ€é«˜ç›ˆåˆ©ç‡: 18.45%
  ğŸ“‰ æœ€å¤§äºæŸç‡: -17.30%

FIL-USDT-SWAP long:
  å½“å‰ç›ˆäºç‡: 194.97%
  ğŸ† æœ€é«˜ç›ˆåˆ©ç‡: 213.92%  â† è¶…è¿‡180%çš„æå€¼ï¼
  ğŸ“‰ æœ€å¤§äºæŸç‡: 0.00%

CFX-USDT-SWAP short:
  å½“å‰ç›ˆäºç‡: -2.08%
  ğŸ† æœ€é«˜ç›ˆåˆ©ç‡: 0.00%
  ğŸ“‰ æœ€å¤§äºæŸç‡: -0.55%

BNB-USDT-SWAP short:
  å½“å‰ç›ˆäºç‡: 16.39%
  ğŸ† æœ€é«˜ç›ˆåˆ©ç‡: 16.51%
  ğŸ“‰ æœ€å¤§äºæŸç‡: 0.00%
```

âœ… **å‰ç«¯ç°åœ¨ä¼šæ­£ç¡®æ˜¾ç¤ºï¼š**
- ğŸ† æœ€é«˜ç›ˆåˆ©ç‡ï¼šæ˜¾ç¤ºä¸ºç»¿è‰²
- ğŸ“‰ æœ€å¤§äºæŸç‡ï¼šæ˜¾ç¤ºä¸ºçº¢è‰²
- ä¸¤ä¸ªå€¼å‚ç›´æ’åˆ—åœ¨æå€¼åˆ—ä¸­

---

## é—®é¢˜2ï¼šä¿è¯é‡‘æ˜¾ç¤ºé”™è¯¯ âš ï¸ å‰ç«¯å¾…éªŒè¯

### åç«¯éªŒè¯ç»“æœ âœ…

**FIL-USDT-SWAP shortï¼š**
- æŒä»“æ•°é‡ï¼š65å¼ 
- æ ‡è®°ä»·æ ¼ï¼š$1.515
- æ æ†å€æ•°ï¼š10x
- åä¹‰ä»·å€¼ï¼š98.4750 USDT
- **APIè¿”å›ä¿è¯é‡‘ï¼š9.8475 USDT** âœ…
- è®¡ç®—ä¿è¯é‡‘ï¼š9.8475 USDT
- å·®å¼‚ï¼š0.000000 USDT

**FIL-USDT-SWAP longï¼š**
- æŒä»“æ•°é‡ï¼š48å¼ 
- æ ‡è®°ä»·æ ¼ï¼š$1.515
- æ æ†å€æ•°ï¼š10x
- åä¹‰ä»·å€¼ï¼š72.7200 USDT
- **APIè¿”å›ä¿è¯é‡‘ï¼š7.2720 USDT** âœ…
- è®¡ç®—ä¿è¯é‡‘ï¼š7.2720 USDT
- å·®å¼‚ï¼š0.000000 USDT

### å‰ç«¯æ˜¾ç¤ºå¼‚å¸¸

ç”¨æˆ·æˆªå›¾æ˜¾ç¤ºä¿è¯é‡‘ä¸º **93142 USDT**ï¼Œè¿™æ˜¯é”™è¯¯çš„ã€‚

å¯èƒ½åŸå› ï¼š
1. å‰ç«¯æ˜¾ç¤ºäº†é”™è¯¯çš„å­—æ®µï¼ˆå¯èƒ½æ˜¾ç¤ºäº†notional_usdè€Œä¸æ˜¯marginï¼‰
2. å•ä½è½¬æ¢é”™è¯¯
3. ç¼“å­˜é—®é¢˜

### æ’æŸ¥å»ºè®®

1. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°é¡µé¢**
2. **F12å¼€å‘è€…å·¥å…·éªŒè¯**ï¼š
   - æ‰“å¼€Networkæ ‡ç­¾
   - åˆ·æ–°é¡µé¢
   - æ‰¾åˆ° `/api/anchor-system/current-positions?trade_mode=real` è¯·æ±‚
   - æŸ¥çœ‹Responseä¸­çš„ `margin` å€¼
   - å¯¹æ¯”é¡µé¢å®é™…æ˜¾ç¤ºå€¼

3. **å¦‚æœåˆ·æ–°åè¿˜æ˜¯é”™è¯¯**ï¼Œæä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
   - æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­çš„ Network Response æˆªå›¾
   - é¡µé¢å®é™…æ˜¾ç¤ºå€¼æˆªå›¾
   - æˆ‘ä¼šç«‹å³å®šä½å‰ç«¯ä»£ç é—®é¢˜å¹¶ä¿®å¤

---

## é—®é¢˜3ï¼šFILå’ŒCFXè¢«å¹³æ‰ï¼Ÿ â„¹ï¸ è¯¯ä¼š

### å®é™…æƒ…å†µ

**å½“å‰æŒä»“çŠ¶æ€ï¼ˆ2026-01-02 00:24ï¼‰ï¼š**

| å¸ç§ | æ–¹å‘ | æŒä»“é‡ | ç›ˆäºç‡ | çŠ¶æ€ |
|------|------|--------|--------|------|
| FIL-USDT-SWAP | åšç©º | 65å¼  | +3.29% | âœ… æœªå¹³ä»“ |
| FIL-USDT-SWAP | åšå¤š | 48å¼  | +194.97% | âœ… æœªå¹³ä»“ |
| CFX-USDT-SWAP | åšç©º | 13å¼  | -2.08% | âœ… æœªå¹³ä»“ |
| CFX-USDT-SWAP | åšå¤š | 11å¼  | +43.23% | âœ… æœªå¹³ä»“ |

**ç»“è®ºï¼šFILå’ŒCFXéƒ½æ²¡æœ‰è¢«å®Œå…¨å¹³æ‰ï¼ŒæŒä»“éƒ½è¿˜åœ¨ï¼**

### è‡ªåŠ¨ç»´æŠ¤é…ç½®çŠ¶æ€

```json
{
  "auto_maintain_long_enabled": false,    â† åšå¤šè‡ªåŠ¨ç»´æŠ¤å·²å…³é—­
  "auto_maintain_short_enabled": false,   â† åšç©ºè‡ªåŠ¨ç»´æŠ¤å·²å…³é—­
  "super_maintain_long_enabled": false,
  "super_maintain_short_enabled": false,
  "loss_threshold": -10,
  "margin_min": 0.6,
  "margin_max": 1.0
}
```

**æ‰€æœ‰è‡ªåŠ¨ç»´æŠ¤åŠŸèƒ½éƒ½å·²å…³é—­ï¼Œç³»ç»Ÿä¸ä¼šè‡ªåŠ¨å¹³ä»“ã€‚**

---

## ä¿®å¤æ–‡ä»¶æ¸…å•

### å·²ä¿®å¤çš„æ–‡ä»¶
1. âœ… `source_code/templates/anchor_system_real.html`
   - æ·»åŠ äº†æå€¼åˆ—è¡¨å¤´
   - æ·»åŠ äº†æå€¼æ•°æ®æ¸²æŸ“
   - ä¿®å¤äº†ç©ºæ•°æ®çš„colspan

2. âœ… `app_new.py`
   - å·²åœ¨ä¹‹å‰ä¿®å¤ä¸­æ·»åŠ äº†æå€¼å­—æ®µè¿”å›
   - æ•°æ®åº“æŸ¥è¯¢ä½¿ç”¨ç‹¬ç«‹è¿æ¥

3. âœ… `position_profit_extremes_tracker.py`
   - å®ˆæŠ¤è¿›ç¨‹æŒç»­ç›‘æ§å¹¶æ›´æ–°æå€¼
   - å½“å‰æ­£å¸¸è¿è¡Œï¼Œ23ä¸ªæŒä»“éƒ½æœ‰æå€¼è®°å½•

### Gitæäº¤è®°å½•
```bash
commit 25abc63
Author: ...
Date:   2026-01-02 00:23:45

    ä¿®å¤å‰ç«¯æå€¼æ˜¾ç¤ºï¼šåœ¨æŒä»“è¡¨æ ¼ä¸­æ·»åŠ æå€¼åˆ—ï¼Œæ˜¾ç¤ºæœ€é«˜ç›ˆåˆ©ç‡å’Œæœ€å¤§äºæŸç‡
    
    - åœ¨è¡¨å¤´æ·»åŠ "æå€¼"åˆ—
    - åœ¨è¡¨æ ¼æ•°æ®ä¸­æ¸²æŸ“ max_profit_rate å’Œ max_loss_rate
    - æ˜¾ç¤ºæ ¼å¼ï¼šğŸ†æœ€é«˜ç›ˆåˆ©ç‡ï¼ˆç»¿è‰²ï¼‰å’ŒğŸ“‰æœ€å¤§äºæŸç‡ï¼ˆçº¢è‰²ï¼‰å‚ç›´æ’åˆ—
    - ä¿®å¤ç©ºæ•°æ®colspanä»11æ”¹ä¸º12
```

---

## æ€»ç»“

### âœ… å·²å®Œå…¨ä¿®å¤
1. **æå€¼æ˜¾ç¤ºé—®é¢˜**ï¼šå‰ç«¯å·²æ·»åŠ æå€¼åˆ—ï¼Œä¼šæ­£ç¡®æ˜¾ç¤ºæœ€é«˜ç›ˆåˆ©ç‡å’Œæœ€å¤§äºæŸç‡
2. **åç«¯ä¿è¯é‡‘è®¡ç®—**ï¼šéªŒè¯æ­£ç¡®æ— è¯¯

### âš ï¸ éœ€è¦ç”¨æˆ·éªŒè¯
1. **å‰ç«¯ä¿è¯é‡‘æ˜¾ç¤º**ï¼š
   - è¯·åˆ·æ–°é¡µé¢ï¼ˆCtrl+F5å¼ºåˆ¶åˆ·æ–°ï¼‰
   - å¦‚æœè¿˜æ˜¯æ˜¾ç¤ºé”™è¯¯å€¼ï¼Œè¯·æä¾›å¼€å‘è€…å·¥å…·çš„æˆªå›¾
   - æˆ‘ä¼šç«‹å³å®šä½å¹¶ä¿®å¤å‰ç«¯æ˜¾ç¤ºä»£ç 

### â„¹ï¸ æ¾„æ¸…çš„è¯¯ä¼š
1. **FILå’ŒCFXæœªè¢«å¹³ä»“**ï¼šæ‰€æœ‰æŒä»“éƒ½æ­£å¸¸å­˜åœ¨
2. **è‡ªåŠ¨ç»´æŠ¤å·²å…³é—­**ï¼šç³»ç»Ÿä¸ä¼šè‡ªåŠ¨å¹³ä»“

---

## ä¸‹ä¸€æ­¥æ“ä½œå»ºè®®

1. **ç«‹å³æ“ä½œ**ï¼š
   - æŒ‰ Ctrl+F5 å¼ºåˆ¶åˆ·æ–°é¡µé¢
   - æŸ¥çœ‹æå€¼åˆ—æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
   - æŸ¥çœ‹ä¿è¯é‡‘æ˜¯å¦æ˜¾ç¤ºæ­£ç¡®

2. **å¦‚æœä¿è¯é‡‘è¿˜æ˜¯æ˜¾ç¤ºé”™è¯¯**ï¼š
   - æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
   - Networkæ ‡ç­¾ï¼Œåˆ·æ–°é¡µé¢
   - æˆªå›¾ API Response ä¸­çš„ margin å€¼
   - æˆªå›¾é¡µé¢å®é™…æ˜¾ç¤ºå€¼
   - æä¾›ç»™æˆ‘ï¼Œæˆ‘ç«‹å³ä¿®å¤

3. **FILåšå¤š194.97%çš„æå€¼213.92%**ï¼š
   - è¿™æ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„äº¤æ˜“ï¼
   - æå€¼è®°å½•åŠŸèƒ½æ­£å¸¸å·¥ä½œ
   - å¯ä»¥åœ¨è¡¨æ ¼ä¸­çœ‹åˆ°å†å²æœ€é«˜ç›ˆåˆ©ç‡

---

## æŠ€æœ¯ç»†èŠ‚

### æå€¼è·Ÿè¸ªæœºåˆ¶
1. **å®ˆæŠ¤è¿›ç¨‹**ï¼šæ¯60ç§’æ‰«æä¸€æ¬¡æ‰€æœ‰æŒä»“
2. **æ•°æ®åº“è®°å½•**ï¼šposition_profit_extremesè¡¨
3. **æ›´æ–°é€»è¾‘**ï¼š
   - å½“å‰ç›ˆäºç‡ > å†å²æœ€é«˜ç›ˆåˆ©ç‡ â†’ æ›´æ–°max_profit_rate
   - å½“å‰ç›ˆäºç‡ < å†å²æœ€å¤§äºæŸç‡ â†’ æ›´æ–°max_loss_rate
4. **APIè¿”å›**ï¼šæ¯æ¬¡æŸ¥è¯¢æŒä»“æ—¶è¿”å›æœ€æ–°çš„æå€¼è®°å½•

### ä¿è¯é‡‘è®¡ç®—å…¬å¼
```
ä¿è¯é‡‘ = (æŒä»“æ•°é‡ Ã— æ ‡è®°ä»·æ ¼) / æ æ†å€æ•°
```

ç¤ºä¾‹ï¼š
- FILåšç©º65å¼ ï¼Œæ ‡è®°ä»·$1.515ï¼Œ10xæ æ†
- ä¿è¯é‡‘ = (65 Ã— 1.515) / 10 = 9.8475 USDT âœ…

---

**ä¿®å¤å®Œæˆæ—¶é—´**ï¼š2026-01-02 00:24:00
**ä¿®å¤çŠ¶æ€**ï¼šæå€¼æ˜¾ç¤ºâœ…å®Œå…¨ä¿®å¤ | ä¿è¯é‡‘è®¡ç®—âœ…æ­£ç¡® | å‰ç«¯ä¿è¯é‡‘æ˜¾ç¤ºâš ï¸å¾…éªŒè¯
