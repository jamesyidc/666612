# 主账号维护逻辑分析

## 主账号 vs 子账号的区别

### 子账号维护（已修复）
```
场景：对已有持仓进行维护
旧逻辑：开100U新仓 → 平掉旧仓留10U
问题：开仓时保证金不足 ❌

新逻辑：平掉旧仓 → 开100U新仓 → 纠错调整到10U
结果：成功！✅
```

### 主账号维护（需要检查）
```
场景：对已有持仓进行超级维护
逻辑：在现有持仓上加仓100U → 平掉到保留10U
问题：？
```

## 关键差异

1. **子账号**：
   - 维护时可能持仓很小（10U左右）
   - 需要先平掉全部，再重新开100U
   - 问题：开仓需要账户有100U可用余额

2. **主账号**：
   - 维护时持仓可能已经较大
   - 在现有持仓上**加仓100U**
   - 如果现有持仓有足够保证金，可能可以加仓
   - **但如果保证金已满，仍然会失败**

## 结论

主账号的超级维护**可能也有问题**，取决于：
- 当前持仓的保证金是否充足
- 账户是否有足够的可用余额

**建议**：
1. 测试主账号超级维护是否成功
2. 如果失败，也改成"先平仓再开仓"的逻辑
3. 保持一致性

## 测试方案

选择一个主账号持仓测试：
- 保证金较小的持仓（如CRO 0.92U）
- 测试超级维护100U
- 观察是否会保证金不足

如果失败，修改主账号逻辑。
