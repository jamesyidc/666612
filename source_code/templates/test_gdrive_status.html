<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>GDriveçŠ¶æ€æµ‹è¯•</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #000; color: #0f0; }
        .status { font-size: 24px; margin: 20px 0; }
        .running { color: #0f0; }
        .stopped { color: #f00; }
        pre { background: #111; padding: 15px; border: 1px solid #333; }
    </style>
</head>
<body>
    <h1>ğŸ” Google Drive Detector å®æ—¶çŠ¶æ€</h1>
    <div id="time"></div>
    <div class="status" id="status">æ­£åœ¨åŠ è½½...</div>
    <pre id="data"></pre>
    
    <script>
        async function loadStatus() {
            const now = new Date().toLocaleString('zh-CN');
            document.getElementById('time').textContent = 'åˆ·æ–°æ—¶é—´: ' + now;
            
            try {
                const response = await fetch('/api/gdrive-detector/status');
                const result = await response.json();
                
                document.getElementById('data').textContent = JSON.stringify(result, null, 2);
                
                if (result.success && result.data.detector_running) {
                    document.getElementById('status').innerHTML = 
                        'âœ… <span class="running">è¿è¡Œä¸­</span> - æœ€åæ£€æŸ¥: ' + 
                        result.data.last_check_time + ' | å»¶è¿Ÿ: ' + 
                        result.data.delay_minutes.toFixed(1) + 'åˆ†é’Ÿ';
                } else {
                    document.getElementById('status').innerHTML = 
                        'âŒ <span class="stopped">å·²åœæ­¢</span>';
                }
            } catch (error) {
                document.getElementById('status').innerHTML = 
                    'âŒ <span class="stopped">APIé”™è¯¯: ' + error.message + '</span>';
                document.getElementById('data').textContent = 'é”™è¯¯: ' + error;
            }
        }
        
        loadStatus();
        setInterval(loadStatus, 10000); // æ¯10ç§’åˆ·æ–°
    </script>
</body>
</html>
